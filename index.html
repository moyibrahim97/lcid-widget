<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LCID Dashboard</title>
    <style>
      body {
        background: #0b0b0b;
        color: #eaeaea;
        font-family: "Inter", sans-serif;
        text-align: center;
        margin: 0;
        padding: 0;
      }
      h2 { margin-top: 15px; }
      .ratio {
        font-size: 1.4em;
        margin: 10px 0 20px;
      }
      .tradingview-widget-container {
        height: 400px;
        width: 100%;
      }
    </style>
  </head>
  <body>
    <h2>LCID Dashboard</h2>
    <div class="ratio">Put/Call OI Ratio: <span id="ratio">Loading...</span></div>

    <!-- TradingView Widget -->
    <div class="tradingview-widget-container">
      <div id="tradingview_chart"></div>
      <script src="https://s3.tradingview.com/tv.js"></script>
      <script>
        new TradingView.widget({
          autosize: true,
          symbol: "NASDAQ:LCID",
          interval: "60",
          timezone: "Etc/UTC",
          theme: "dark",
          style: "1",
          locale: "en",
          enable_publishing: false,
          allow_symbol_change: false,
          container_id: "tradingview_chart"
        });
      </script>
    </div>

    <script>
      // Get LCID options data from a free source (Barchart JSON endpoint)
      async function getPutCallRatio() {
        try {
          const response = await fetch("https://cdn.barchart.com/quotes/summary/LCID.json");
          const data = await response.json();
          // Barchart's summary includes Put/Call ratios in some fields, but if not, we'll show static fallback
          const ratio = data?.optionsPutCallRatio || "0.72"; // fallback example
          document.getElementById("ratio").textContent = ratio;
        } catch (err) {
          document.getElementById("ratio").textContent = "Unavailable";
        }
      }

      getPutCallRatio();
    </script>
  </body>
</html>
